@model IEnumerable<Profile.Models.Comment>

@{ 
    int current_user = int.Parse(Session["user_id"].ToString());

}
<table class="table" >

  
@foreach (var item in Model) {
    <tr>
        <td style="background-color:#EEEEEE">

            <div class="d-flex justify-content-between align-items-center ">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="mr-2">
                        @if (item.Profile.Pictures.SingleOrDefault(p => p.Profile.profile_picture == p.picture_id) != null)
                        {
                            <img class="img-circle" width="30" height="30" src="/Images/@item.Profile.Pictures.SingleOrDefault(p => p.Profile.profile_picture == p.picture_id).path" alt="">
                        }
                        else
                        {
                            <img class="img-circle" width="30" height="30" src="/Images/Default.png" alt="">
                        }
                    </div>
                    <div class="ml-2">
                        <div class="h5 m-0">@Html.ActionLink(item.Profile.first_name, "Details", "Home", new { id = item.Profile.profile_id }, null)</div>
                        <div class="h7 text-muted">@item.Profile.first_name @item.Profile.last_name</div>
                        <div class="h7 text-muted">@Html.DisplayFor(modelItem => item.time_stamp)</div>
                    </div>
                    <div class="ml-2">
                        <div class="ml-3">@Html.DisplayFor(modelItem => item.comment1)</div>

                        <div class="ml-3 " style="display:inline-flex; ">
                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 1 })" object_id="@item.comment_id" reaction_id="1" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/thumbs_up.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 1).Count()
                                </div>
                            </div>


                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 2 })" object_id="@item.comment_id" reaction_id="2" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/thumbs_down.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 2).Count()
                                </div>
                            </div>

                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 3 })" object_id="@item.comment_id" reaction_id="3" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/heart_icon.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 3).Count()
                                </div>
                            </div>

                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 4 })" object_id="@item.comment_id" reaction_id="4" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/broken_heart.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 4).Count()
                                </div>
                            </div>

                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 5 })" object_id="@item.comment_id" reaction_id="5" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/happy.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 5).Count()
                                </div>
                            </div>
                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 6 })" object_id="@item.comment_id" reaction_id="6" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/sad.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 6).Count()
                                </div>
                            </div>

                            <div href="@Url.Action("AddReaction", "Comment", new { id = item.comment_id, reaction_id = 7 })" object_id="@item.comment_id" reaction_id="7" class="comment reaction card-link">
                                <img src="~/Reaction_Icon/angry.png" />
                                <div style="padding-left: 10px; padding-top: 5px">
                                    @item.Comment_Reaction.Where(cr => cr.reaction_type_id == 7).Count()
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @if (item.profile_id == current_user)
                {

                    <div class="dropdown">
                        <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-ellipsis-h"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1" style="position:static">
                            <div class="h6 dropdown-header">Options</div>
                            @Html.ActionLink("Edit", "Edit", "Comment", new { id = item.comment_id }, new { @class = "dropdown-item" })
                            @Html.ActionLink("Delete", "Delete", "Comment", new { id = item.comment_id }, new { @class = "dropdown-item" })
                        </div>
                    </div>
                }
            </div>
 

        </td>   

    </tr>         
}
</table>